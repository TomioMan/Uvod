<!DOCTYPE html>
<html lang="en">
<head>
    <meta charset="UTF-8">
    <meta name="viewport" content="width=device-width, initial-scale=1.0">
    <title>Matter.js Example</title>
    <style>
        /*
        body {
            width: 100vw;
            height: 100vh;  
            display: flex;
            justify-content: center;
            align-items: center;
            flex-direction: column;
            margin: 0;
        }
        #myButton {
            position: absolute;
            bottom: 20px;
            right: 20px;
        }
        */
    </style>
</head>
<body>
    <h1 id="output_ajax">dih</h1>
    <button id="myButton">Spawn Rectangle</button>
    <script src="matter.js"></script>
    <script>
        let xhttp = new XMLHttpRequest();
        xhttp.onreadystatechange = function() {
            if (this.readyState == 4 && this.status == 200) {
                output_ajax.innerHTML = "Načteno pomocí AJAX: " + this.responseText;
            }
        };
        xhttp.open("GET", "data.txt");
        xhttp.send();

        //FETCH
        fetch("data.txt")
        .then()

        
        // module aliases
        const Engine = Matter.Engine,
              Render = Matter.Render,
              Runner = Matter.Runner,
              Bodies = Matter.Bodies,
              Composite = Matter.Composite;

        // create an engine
        const engine = Engine.create();

        // create a renderer
        const render = Render.create({
            element: document.body,
            engine: engine,
            options: {
                width: 1200,
                height: 800,
                wireframes: false
            }
        });

        // create a ground
        const ground = Bodies.rectangle(600, 810, 10010, 60, { isStatic: true });
        const wallLeft = Bodies.rectangle(-10, 400, 60, 10000, { isStatic: true });
        const wallRight = Bodies.rectangle(1210, 400, 60, 10000, { isStatic: true });
        Composite.add(engine.world, [ground, wallLeft, wallRight]);

        // run the renderer and engine
        Render.run(render);
        const runner = Runner.create();
        Runner.run(runner, engine);

        setInterval(() => {
            const rect = Bodies.circle(((Math.random() * 100) + 500), ((Math.random() * 100) + 100), 30, {
                restitution: 0.6, // makes it a bit bouncy
                render: {
                    fillStyle: `hsl(${Math.random() * 360}, 80%, 60%)`
                }
            });
            Composite.add(engine.world, rect);
        }, 5000);

        // spawn rectangles on button click
        const button = document.getElementById('myButton');
        button.addEventListener('click', () => {
            const rect = Bodies.circle(((Math.random() * 100) + 500), ((Math.random() * 100) + 100), 30, {
                restitution: 0.6, // makes it a bit bouncy
                render: {
                    fillStyle: `hsl(${Math.random() * 360}, 80%, 60%)`
                }
            });
            Composite.add(engine.world, rect);
        });
        
    </script>
</body>
</html>
